\begin{tikzpicture}[every node/.style={font=\ttfamily\small},main node/.style={draw,circle},type node/.style={rounded corners,draw},->,>=stealth',node distance=2cm]
\node[main node,red] (e1) {e1};
\node[main node,blue,dashed,left of = e1] (e2) {e2};

\node[type node,above of = e1] (Aperson) {Person};
\node[type node,above of = e2] (Astudent) {Student};

\node[main node,blue,dashed,right of = e1,xshift=2cm] (Be2) {e2};
\node[type node,above of = Be2] (Bperson) {Person};

\coordinate (Ax) at ($ (Astudent) + (-1,.5) $);
\coordinate (Ay) at ($ (e1) + (.9,-.5) $);
\draw[rounded corners,red]  (Ax) node[yshift=.3cm] {\textbf{A}} rectangle (Ay);

\coordinate (Bx) at ($ (Bperson) + (-.9,.5) $);
\coordinate (By) at ($ (Be2) + (.9,-.5) $);
\draw[rounded corners,dashed,blue]  (Bx) node[yshift=.3cm] {\textbf{B}} rectangle (By);

\node[main node,below of = e1,xshift=2cm] (h1) {h1};
\node[main node,below of = e2] (h2) {h2};

\node[type node,below of = h1,xshift=-2cm] (person) {Person};
\node[type node,below of = h2] (student) {Student};

\path
(e1) edge[red] node[fill=white] {\glssymbol{atype}} (Aperson)
		edge[red] node[below] {knows} (e2)
(e2) edge[red] node[fill=white] {\glssymbol{atype}} (Astudent)
(Be2) edge[blue,dashed] node[fill=white] {\glssymbol{atype}} (Bperson)
(e1) edge[blue,dashed] node[below] {supervises} (Be2)

(e1) edge[dotted] node[fill=white] {$R_t$} (h1)
(e2) edge[dotted] node[fill=white] {$R_t$} (h2)
(Be2) edge[dotted] node[fill=white] {$R_t$} (h1)

(h1) edge[loop right] node[right] {supervises} (h1)
(h1) edge node[above] {knows} (h2)

(h2) edge node[fill=white] {\glssymbol{atype}} (person)
		edge node[fill=white] {\glssymbol{atype}} (student)
(h1) edge node[fill=white] {\glssymbol{atype}} (person)
;
\end{tikzpicture}